
[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m
[36m[1m TEST DEL PIPELINE ETL DE FONDOS                                 [0m
[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m

[1mConfiguraciรณn del Test:[0m
  Fecha: 2025-10-24
  Fondo: MRCLP (Moneda Renta CLP)
  API: http://localhost:3001/api
  Polling: cada 3s
  Timeout: 600s

[34mโน Paso 1: Validando fondo en BD...[0m
[32mโ Fondo MRCLP encontrado (ID_Fund: 20)[0m
[34mโน 
Paso 2: Iniciando ejecuciรณn del pipeline...[0m
[34mโน Iniciando ejecuciรณn para fecha: 2025-10-24...[0m
[32mโ Ejecuciรณn iniciada: ID #1766174087292[0m
[34mโน Estado inicial: EN_PROGRESO[0m
[34mโน 
Paso 3: Monitoreando progreso en tiempo real...[0m
[34mโน Iniciando monitoreo en tiempo real...
[0m
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [1mMONITOREO: Ejecuciรณn #1766174087292                           [0mโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Fecha: 2025-10-24 | Fondo: MRCLP (Moneda Renta CLP)           โ
โ Tiempo: 00:04 | Estado: EN_PROGRESO                           โ
โ                                                               โ
โ PROGRESO MRCLP:                                               โ
โ     EXTRACCION          PENDIENTE                             โ
โ     VALIDACION          PENDIENTE                             โ
โ     PROCESS_IPA         PENDIENTE                             โ
โ         IPA_01 RescatarLocalPrice      PENDIENTE              โ
โ         IPA_02 AjusteSONA              PENDIENTE              โ
โ         IPA_03 RenombrarCxCCxP         PENDIENTE              โ
โ         IPA_04 TratamientoSuciedades   PENDIENTE              โ
โ         IPA_05 EliminarCajasMTM        PENDIENTE              โ
โ         IPA_06 CrearDimensiones        PENDIENTE              โ
โ         IPA_07 AgruparRegistros        PENDIENTE              โ
โ     PROCESS_CAPM        PENDIENTE                             โ
โ     PROCESS_DERIVADOS   PENDIENTE                             โ
โ     PROCESS_PNL         PENDIENTE                             โ
โ     PROCESS_UBS         PENDIENTE                             โ
โ     CONCATENAR          PENDIENTE                             โ
โ                                                               โ
โ RESUMEN GENERAL (Todos los fondos):                           โ
โ   Total: 43 | Exitosos: 0 | Fallidos: 0 | En progreso: 43     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [1mMONITOREO: Ejecuciรณn #1766174087292                           [0mโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Fecha: 2025-10-24 | Fondo: MRCLP (Moneda Renta CLP)           โ
โ Tiempo: 00:07 | Estado: ERROR                                 โ
โ                                                               โ
โ PROGRESO MRCLP:                                               โ
โ     EXTRACCION          PENDIENTE                             โ
โ     VALIDACION          PENDIENTE                             โ
โ     PROCESS_IPA         PENDIENTE                             โ
โ         IPA_01 RescatarLocalPrice      PENDIENTE              โ
โ         IPA_02 AjusteSONA              PENDIENTE              โ
โ         IPA_03 RenombrarCxCCxP         PENDIENTE              โ
โ         IPA_04 TratamientoSuciedades   PENDIENTE              โ
โ         IPA_05 EliminarCajasMTM        PENDIENTE              โ
โ         IPA_06 CrearDimensiones        PENDIENTE              โ
โ         IPA_07 AgruparRegistros        PENDIENTE              โ
โ     PROCESS_CAPM        PENDIENTE                             โ
โ     PROCESS_DERIVADOS   PENDIENTE                             โ
โ     PROCESS_PNL         PENDIENTE                             โ
โ     PROCESS_UBS         PENDIENTE                             โ
โ     CONCATENAR          PENDIENTE                             โ
โ                                                               โ
โ RESUMEN GENERAL (Todos los fondos):                           โ
โ   Total: 43 | Exitosos: 0 | Fallidos: 43 | En progreso: 0     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
[34mโน รltimo cambio: Estado_Final โ ERROR[0m
[32mโ 
โ Ejecuciรณn completada![0m
[34mโน 
Paso 4: Verificando outputs en base de datos...[0m

[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m
[36m[1m VERIFICACIรN DE OUTPUTS EN BD                                   [0m
[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m

[34mโน Verificando estado final del fondo en BD...[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT
        Estado_Final,
        Estado...[0m
[33mโ No se pudo verificar estado en BD (query fallรณ o sin datos)[0m
[34mโน Verificando tablas de staging...[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM staging...[0m
[33mโ Tabla staging.IPA no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ staging.IPA: Sin registros[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM staging...[0m
[33mโ Tabla staging.CAPM no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ staging.CAPM: Sin registros[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM staging...[0m
[33mโ Tabla staging.PNL no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ staging.PNL: Sin registros[0m
[34mโน Verificando tablas de process...[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM process...[0m
[33mโ Tabla process.TBL_IPA no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ process.TBL_IPA: Sin registros[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM process...[0m
[33mโ Tabla process.TBL_PNL no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ process.TBL_PNL: Sin registros[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT COUNT(*) as Total
      FROM process...[0m
[33mโ Tabla process.TBL_PNL_IPA no retornรณ datos para ID_Ejecucion=1766174087292, ID_Fund=20[0m
[33mโ process.TBL_PNL_IPA: Sin registros[0m
[34mโน Verificando mรฉtricas de validaciรณn...[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT
        Etapa,
        Metrica_Nombr...[0m
[32mโ Todas las mรฉtricas de validaciรณn OK (o sin mรฉtricas)[0m
[34mโน Verificando logs de error...[0m
[33mโ [Simulaciรณn] Query SQL ejecutada (usar MCP para datos reales): 
      SELECT TOP 10
        Timestamp,
        Ni...[0m
[32mโ Sin logs de error[0m

[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m
[36m[1m GENERANDO REPORTE FINAL                                         [0m
[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  REPORTE FINAL DE EJECUCIรN
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

INFORMACIรN GENERAL:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  ID Ejecuciรณn: 1766174087292
  Fecha Reporte: 2025-10-24
  Fondo: MRCLP (Moneda Renta CLP)
  Estado Final: ERROR
  Duraciรณn: N/A

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
RESULTADOS POR ETAPA:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  EXTRACCION           PENDIENTE
  VALIDACION           PENDIENTE
  PROCESS_IPA          PENDIENTE
  PROCESS_CAPM         PENDIENTE
  PROCESS_DERIVADOS    PENDIENTE
  PROCESS_PNL          PENDIENTE
  PROCESS_UBS          PENDIENTE
  CONCATENAR           PENDIENTE

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
VERIFICACIรN DE DATOS EN BD:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

  โ Registros en staging.IPA            0
  โ Registros en staging.CAPM           0
  โ Registros en staging.PNL            0
  โ Registros en process.TBL_IPA        0
  โ Registros en process.TBL_PNL        0
  โ Registros en process.TBL_PNL_IPA    0

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
PROBLEMAS DETECTADOS:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
QUERIES SQL PARA VERIFICACIรN MANUAL:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

-- Ver estado completo del fondo
SELECT * FROM logs.Ejecucion_Fondos 
WHERE ID_Ejecucion = 1766174087292 AND ID_Fund = '20';

-- Ver registros IPA generados
SELECT TOP 100 * FROM staging.IPA 
WHERE ID_Ejecucion = 1766174087292 AND ID_Fund = '20';

-- Ver logs de error
SELECT * FROM logs.Ejecucion_Logs 
WHERE ID_Ejecucion = 1766174087292 AND ID_Fund = '20' AND Nivel = 'ERROR';

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           CONCLUSIรN
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Estado: ERROR

Funcionรณ correctamente:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

[32mโ Reporte guardado en: test_result_2025-12-22T14-00-59.txt[0m

[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m
[36m[1m TEST COMPLETADO                                                 [0m
[36mโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ[0m

[32mโ ID de Ejecuciรณn: 1766174087292[0m
[32mโ Estado Final: ERROR[0m
[32mโ Reporte guardado en: C:\Users\ifuentes\homologation\server\test_result_2025-12-22T14-00-59.txt[0m
[31mโ 
โ La ejecuciรณn fallรณ con errores[0m
